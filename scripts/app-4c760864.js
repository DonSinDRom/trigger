"use strict";var app=angular.module("trigger",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMaterial","btford.socket-io","luegg.directives"]);app.directive("ngEnter",function(){return function(t,e,s){e.bind("keydown keypress",function(e){13===e.which&&(t.$apply(function(){t.$eval(s.ngEnter,{event:e})}),e.preventDefault())})}}),app.factory("socket",["$rootScope",function(t){var e=io.connect("http://trigger.fm");return{on:function(s,a){e.on(s,function(){var s=arguments;t.$apply(function(){a.apply(e,s)})})},emit:function(s,a,n){e.emit(s,a,function(){var s=arguments;t.$apply(function(){n&&n.apply(e,s)})})}}}]),app.run(["$rootScope","Client",function(t,e){t.load={signed:!1,welcome:!1,playlist:!1},t.title="Trigger",t.userId=0,e.init(location.host),$(e).bind("welcome",function(s,a){e.channel=a.channels[0],e.getChannels(function(t){e.channels=t.channels,console.log(t)}),e.goChannel(1,console.log("Q",a)),console.log("welcome",e.channel),t.load.welcome=!0}),t.client=e}]),app.service("Client",["$log",function(){this.version=2205,this.user=null,this.channel={},this.callbacks={},this.chat=null,this.trackscache=[],this.init=function(){console.log("init"),this.socket=io("http://trigger.fm");var t=this.socket,e=this;t.on("welcome",function(t){$(e).trigger("welcome",t)}),t.on("getver",function(){t.emit("ver",{v:e.version,init:!0})}),t.on("addtrack",function(t){t.track.src="img/nocover.png";var s=t.track;s.vote=0,$(e).trigger("addtrack",s)}),t.on("removetrack",function(t){$(e).trigger("removetrack",t)}),t.on("newcurrent",function(t){$(e).trigger("newcurrent",t),$(e).trigger("removetrack",t)}),t.on("lst",function(t){$(e).trigger("listners",t)}),t.on("usupd",function(t){$(e).trigger("userupdate",t)}),t.on("uplim",function(t){$(e).trigger("updatelimits",t)}),t.on("channeldata",function(t){console.log("channeldata",t)}),t.on("message",function(t){$(e).trigger("message",t)}),t.on("history",function(t){e.callbacks.history(t)}),t.on("channelsdata",function(t){e.channels=t.channels,e.callbacks.channelsdata(t)}),t.on("userdata",function(t){e.callbacks.userdata(t)}),t.on("uvd",function(t){e.callbacks.uvotedata(t)}),t.on("invitestatus",function(t){e.callbacks.invitestatus(t)}),t.on("recoverstatus",function(t){e.callbacks.recover(t)}),t.on("changepass",function(t){e.callbacks.changepass(t)}),t.on("banned",function(t){$(e).trigger("banned",t)}),t.on("newuser",function(t){$(e).trigger("newuser",t)}),t.on("offuser",function(t){$(e).trigger("offuser",t)}),t.on("playlist",function(t){e.callbacks.playlist(t)}),t.on("loginstatus",function(t){if(t.error){"nouser"===t.error&&(t.error="Нет такого пользователя"),"wrongpass"===t.error&&(t.error="Не тот пароль")}else e.user=t.user,e.user.t<0&&(e.user.t=0),e.user.nt=new Date(Date.parse(new Date)+e.user.nt);e.callbacks.loginstatus(t)}),t.on("disconnect",function(){$(e).trigger("disconnect"),e.user=null,e.channel={},e.callbacks={},e.chat=null}),t.on("tags",function(t){e.callbacks.tags(t.t)}),t.on("uptr",function(t){$(e).trigger("trackupdate",t)})},this.login=function(t,e,s){var a=this;a.callbacks.loginstatus=s,this.socket.emit("login",{u:t,p:e})},this.track=function(t,e){var s=this,a=!1;if(t===s.channel.current.id){if(!e)return s.channel.current;e(s.channel.current),a=!0}for(var n in s.channel.pls)if(s.channel.pls[n].id===t){if(!e)return s.channel.pls[n];e(s.channel.pls[n]),a=!0}!a&&e&&this.socket.emit("gettrack",{id:t},function(t){e(t)})},this.getPlaylist=function(t,e){cl=this,cl.callbacks.playlist=e,this.socket.emit("getplaylist",{id:t})},this.goChannel=function(t,e){var s=this;s.callbacks.channeldata=e,this.socket.emit("gochannel",{id:t})},this.getChannels=function(t){var e=this;e.callbacks.channelsdata=t,this.socket.emit("getchannels")},this.getChat=function(t,e){var s=this;this.socket.emit("getchat",{shift:t.shift,id:this.channel.id},function(t){t.u&&(s.chat=t,s.chat.id=s.channel.chid),e(t)})},this.sendMessage=function(t,e){var s={m:t};this.socket.emit("sendmessage",s,e)},this.tracksubmit=function(t,e){var s=t.form;this.socket.emit("tracksubmit",{chid:this.channel.id,track:t.track},function(t){t.form=s,console.log("data.form: ",t.form),e(t)})},this.addvote=function(t){this.user&&(t.chid=this.channel.id,this.socket.emit("vote",t))},this.adduservote=function(t,e){this.user&&(this.callbacks.uvotedata=e,this.socket.emit("uvote",t))},this.getUser=function(t,e){this.socket.emit("getuser",t,e)},this.getHistory=function(t,e,s){this.callbacks.history=s,this.socket.emit("gethistory",{chid:this.channel.id,s:t,g:e})},this.getTags=function(t,e){cl=this,cl.callbacks.tags=e,this.socket.emit("gettags",{s:t})},this.getTrackTags=function(t,e,s){cl=this,cl.callbacks.tags=s,this.socket.emit("gettags",{a:t,t:e})},this.addTag=function(t,e){cl=this,cl.callbacks.tags=e,this.socket.emit("addtag",{s:t})},this.killtrack=function(t){cl=this,this.socket.emit("deltrack",{tid:t,chid:cl.channel.chid})},this.sendinvite=function(t,e,s){cl=this,cl.callbacks.invitestatus=s,this.socket.emit("sendinvite",{m:t,c:e})},this.sendextinvite=function(t,e){this.socket.emit("sendextinvite",t,e)},this.logout=function(t){this.socket.emit("logout",{s:!0},t)},this.recover=function(t,e){cl=this,cl.callbacks.recover=e,this.socket.emit("recover",{m:t})},this.changepass=function(t,e,s){cl=this,cl.callbacks.changepass=s,this.socket.emit("changepass",{o:t,n:e})},this.updateUserData=function(t){this.socket.emit("upduserdata",t)},this.updateTrack=function(t){this.socket.emit("updtrack",t)},this.getchannel=function(t){for(var e in this.channels)if(this.channels[e].id===t)return this.channels[e];return!1},this.banuser=function(t,e,s){console.log(e),this.socket.emit("banuser",{id:t,r:e},s)},this.unbanuser=function(t,e){this.socket.emit("unbanuser",{id:t},e)},this.setop=function(t,e){this.socket.emit("setop",t,e)},this.removeop=function(t,e){this.socket.emit("removeop",t,e)},this.setprops=function(t,e){this.socket.emit("setprops",t,e)},this.sendPRVote=function(t,e){this.socket.emit("prvote",t,e)}}]),angular.module("trigger").controller("UserCtrl",["$scope","$rootScope","Client",function(t,e,s){t.user={},t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&s.getUser({id:e.userId},function(e){e.karma=e.p.length-e.n.length,t.user=e,t.$digest()}),t.load.signed=e.load.signed},!0)}]),angular.module("trigger").controller("UploadsCtrl",["$scope","$rootScope","Client",function(t,e,s){t.tracks=[],t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&s.getUser({id:e.userId,uplshift:0},function(e){t.tracks=e,t.$digest()}),t.load.signed=e.load.signed},!0)}]),angular.module("trigger").controller("UploadCtrl",function(){}),angular.module("trigger").controller("SettingsCtrl",function(){}),angular.module("trigger").controller("ProfileCtrl",["$scope","$rootScope","Client",function(t,e,s){t.data={selectedIndex:0,secondLocked:!0,secondLabel:"Item Two"},t.isMyProfile=!1,t.$watch(function(){return e.userId},function(){e.userId===s.user.id&&(t.isMyProfile=!0)},!0),t.next=function(){t.data.selectedIndex=Math.min(t.data.selectedIndex+1,2)},t.previous=function(){t.data.selectedIndex=Math.max(t.data.selectedIndex-1,0)}}]),angular.module("trigger").controller("PlusesCtrl",["$scope","$rootScope","Client",function(t,e,s){t.tracks=[],t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&s.getUser({id:e.userId,uplshift:0,p:!0},function(e){t.tracks=e,t.$digest()}),t.load.signed=e.load.signed},!0)}]),angular.module("trigger").controller("PlaylistCtrl",["$scope","$rootScope","$mdSidenav","Client","socket","$interval",function(t,e,s,a,n,i){function l(){for(var e=t.playlist.length,s=0;e>s;s++){for(var n in t.playlist[s].p)if(t.playlist[s].p[n].vid===a.user.id){t.playlist[s].vote=a.user.w;break}for(var n in t.playlist[s].n)if(t.playlist[s].n[n].vid===a.user.id){t.playlist[s].vote=-a.user.w;break}}for(var n in t.track.p)if(t.track.p[n].vid===a.user.id){t.track.vote=a.user.w;break}for(var n in t.track.n)if(t.track.n[n].vid===a.user.id){t.track.vote=-a.user.w;break}}t.reverse=0;var r=window.innerWidth>0?window.innerWidth:screen.width;960>=r&&(t.reverse=1),t.toggleLeft=function(){s("left").toggle()},t.toggleRight=function(){s("right").toggle()},t.debug=function(){console.log("Client.channel",a.channel,a.channels),console.log("debug",a.channel.ct,t.track.tt)},t.load.signed=!1,t.playlist=[],t.track={},t.$watch(function(){return e.load.welcome},function(){e.load.welcome===!0&&(t.track=a.channel.current,e.title="+D"+a.channel.current.a+" - "+a.channel.current.t+" @ Trigger",console.log("welcooome",a))},!0),$(a).bind("newcurrent",function(s,n){if(t.load.signed===!0){for(var i in n.track.p)if(n.track.p[i].vid===a.user.id){n.track.vote=a.user.w;break}for(var i in n.track.n)if(n.track.n[i].vid===a.user.id){n.track.vote=-a.user.w;break}}a.channel.current=n.track,t.stopTimer(),t.starTimer(0,n.track.tt),t.track=n.track,e.title="! "+n.track.a+" - "+n.track.t+" @ Trigger",t.$digest(),console.log("newcurrent",n)}),t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&l(),t.load.signed=e.load.signed},!0),t.$watch(function(){return e.load.welcome},function(){e.load.welcome===!0&&(t.track=a.channel.current)},!0),$(a).bind("trackupdate",function(e,s){if(console.log("trackupdate",s),s.t.id===a.channel.current.id){if(t.load.signed===!0){for(var n in s.t.p)if(s.t.p[n].vid===a.user.id){s.t.vote=a.user.w;break}for(var n in s.t.n)if(s.t.n[n].vid===a.user.id){s.t.vote=-1*a.user.w;break}}t.track=s.t,console.log("currentUpdate",s.t)}else{for(var i,l=t.playlist.length,r=0;l>r;r++)if(t.playlist[r].id===s.t.id){i=r,t.playlist[r]=s.t,console.log(t.playlist[r]);break}if(t.load.signed===!0){for(var n in s.t.p)if(s.t.p[n].vid===a.user.id){s.t.vote=a.user.w;break}for(var n in s.t.n)if(s.t.n[n].vid===a.user.id){s.t.vote=-1*a.user.w;break}}}t.$digest(),console.log("trackupdate",s.t)}),$(a).bind("addtrack",function(e,s){for(var n=t.playlist.length,i=!1,l=0;n>l;l++)if(t.playlist[l].id===s.track.id){i=!0,console.log(t.playlist[l]);break}if(i===!1){for(var r in s.track.p)if(s.track.p[r].vid===a.user.id){console.log("voted+",s.track.p[r]);break}for(var r in s.track.n)if(s.track.n[r].vid===a.user.id){console.log("voted-",s.track.p[r]);break}t.playlist.push(s.track)}console.log("addtrack",s.track)}),$(a).bind("removetrack",function(e,s){for(var a=t.playlist.length,n=0;a>n;n++)if(t.playlist[n].id===s.track.id){console.log("removetrack",n,s.track.id),t.playlist.splice(n,1);break}}),t.voteUp=function(t){var e=window.innerWidth>0?window.innerWidth:screen.width,s=!1;960>=e&&(s=!0),a.addvote(s===!0?this.track.vote===-a.user.w?{id:t,v:0}:{id:t,v:-a.user.w}:this.track.vote===a.user.w?{id:t,v:0}:{id:t,v:a.user.w})},t.voteDown=function(t){var e=window.innerWidth>0?window.innerWidth:screen.width,s=!1;960>=e&&(s=!0),a.addvote(s===!0?this.track.vote===a.user.w?{id:t,v:0}:{id:t,v:a.user.w}:this.track.vote===-a.user.w?{id:t,v:0}:{id:t,v:-a.user.w})},n.on("channeldata",function(e){console.log("playlist",e.pls),t.playlist=e.pls,t.items=t.playlist,a.channel.ct=e.ct,t.starTimer(a.channel.ct,e.current.tt),t.current=e.current;for(var s=e.pls.length,n=0;s>n;n++)t.playlist[n].vote=0});var o,c=0;t.progress=0,t.starTimer=function(e,s){c=e,o=i(function(){t.progress=(c/s*100).toFixed(2),c++},1e3)},t.stopTimer=function(){angular.isDefined(o)&&(i.cancel(o),o=void 0,t.progress=0)}}]),angular.module("trigger").controller("OnlineCtrl",["$scope","$rootScope","Client",function(t,e,s){t.users=[],t.$watch(function(){return e.load.welcome},function(){e.load.welcome===!0&&(t.users=s.channels[0].users,t.usersCount=t.users.length,console.log("onliiiine",s)),t.load.welcome=e.load.welcome},!0),$(s).bind("offuser",function(e,s){t.usersCount=t.usersCount-1;for(var a in t.users)t.users[a].id===s.uid&&t.users.splice(a,1)}),$(s).bind("newuser",function(e,s){t.usersCount=t.usersCount+1;var a={id:s.uid,n:s.n,a:s.a};t.users.push(a)}),$(s).bind("userupdate",function(e,s){for(var a in t.users)t.users[a].id===s.uid&&(t.users[a].a=s.a)}),t.openProfile=function(t){e.userId=t}}]),angular.module("trigger").controller("NavbarCtrl",["$scope",function(t){t.date=new Date}]),angular.module("trigger").controller("MinusesCtrl",["$scope","$rootScope","Client",function(t,e,s){t.tracks=[],t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&s.getUser({id:e.userId,uplshift:0,p:!1},function(e){t.tracks=e,t.$digest()}),t.load.signed=e.load.signed},!0)}]),angular.module("trigger").controller("LoginCtrl",["$scope","$rootScope","$mdDialog","md5","Client",function(t,e,s,a,n){function i(a){console.log("process login",a),console.log(n),a.error?console.log(a.error):(n.user=a.user,e.userId=a.user.id,e.load.signed=!0,s.hide(),t.$digest())}t.user={name:"",password:""},t.login=function(){""===t.user.name?n.login("DonSinDRom",a.createHash("3a12a6"),i):n.login(t.user.name,a.createHash(t.user.password),i)},t.hide=function(){s.hide()}}]),angular.module("trigger").controller("InfoCtrl",["$scope",function(t){t.data={selectedIndex:3},t.next=function(){t.data.selectedIndex=Math.min(t.data.selectedIndex+1,2)},t.previous=function(){t.data.selectedIndex=Math.max(t.data.selectedIndex-1,0)}}]),angular.module("trigger").controller("HistoryCtrl",["$scope","Client",function(t,e){t.tracks=[],t.gold=!1,e.getHistory(0,t.gold,function(e){t.tracks=e,t.$digest()}),t.showHistory=function(){e.getHistory(0,t.gold,function(e){t.tracks=e,t.$digest()})}}]),angular.module("trigger").controller("DemocracyCtrl",["$scope",function(t){t.data={selectedIndex:1},t.president={name:"Suok",description:"упоротый напрочь"},t.moderators=[{name:"bird",id:"1",description:"упарывается"},{name:"Ucsus",id:"1912",description:"Rudolph"},{name:"Fab",id:"234",description:"Dasher"},{name:"Ololo",id:"1234",description:"редактор"},{name:"Lulz",id:"624",description:"упрт"},{name:"Suok",id:"2453",description:"начальник"}],t.banned=[{name:"bird",id:"1",reason:"упарывается"},{name:"Ucsus",id:"1912",reason:"Rudolph"},{name:"Fab",id:"234",reason:"Dasher"},{name:"Ololo",id:"1234",reason:"редактор"},{name:"Lulz",id:"624",reason:"упрт"},{name:"Suok",id:"2453",reason:"начальник"}],t.next=function(){t.data.selectedIndex=Math.min(t.data.selectedIndex+1,2)},t.previous=function(){t.data.selectedIndex=Math.max(t.data.selectedIndex-1,0)}}]),angular.module("trigger").controller("ConsoleCtrl",["$scope","$rootScope","$interval","$timeout","$mdDialog","$mdBottomSheet","Client",function(t,e,s,a,n,i,l){function r(t,e){t.hide=function(){e.hide()}}var o=["Сделай это расслышать, username!","Гуф всё, username.","Комнаты для слабаков, username!","Будь мужиком, username! Ставь Укупника!","Только 64kbps, username! Только хардкор!","Чятик ждёт твой новый трек, username.","username покинул нас.","Нельзя просто взять и уйти из Триггера, username.","Успей сходить за алкоголем до одиннадцати, username!","Твой трек слишком длинный, username!","Ложиться спать уже бесполезно, username.","Не пытайтесь покинуть Trigger, username!","Ты помнишь жизнь до Триггера, username?","А у меня этот трек был на кассете, username. :)","[removed]alert[removed], username!","Я ДЖВА ГОДА ЖДАЛ ЭТОТ ТРЕК, username!","Bird терпел и тебе велел, username!","В хроме всё заливается, username!","Ну и зачем ты так нажрался, username?","Слушают, что дают, username.","Здесь тебя научат материться по–арабски, username!","Качает, username.","–0–1:0–52, username.","Эту песню написал Альберт Эйнштейн, username.","Прописывай теги, username!","Trigger нас не отпустит, username.","Бёрд его знает, как этот Триггер работает, username.","Включи морячка, username!","Главная проблема музыки в России — это ты, username!","Не обижай пони, username.","Диско — бездушное говно, username!","Только пост–хардкор, только хардкор, username!","Ракамакафо, username!","А ты тоже ждешь 80 порт как и я, username?","Скэтмен круче Скутера, он его заборет, username.","Триггер украл у нас Лепру, username!","ПОЙДЕМ СО МНОЙ В ПРИВАТ, username!","Всё лучше под дабстеп, username.","Музыка нас связала, username.","Что за направление сейчас играет, username?","А у тебя сколько времени, username?","Эй, username! Поставь мой компакт–диск!!!","Танцполом правит ДОБРОТА, username!",'Это не "ЧТО ЗА ГОВНО?", а музыка, username.',"Trigger — первое радио, которое работает в метро, username!","Не стоит принимать теглайны близко к сердцу, username. ;)","Этот трек только для тебя, username!","Здесь иногда бывают женщины, username.","У меня одного не поёт, username?","Моби ни в чём не виноват, username.","Сейчас, ещё одна песня, и иду работать, username.","Который раз ты уходишь спать, username?","Обновляй страничку раз в 5–10 минут, пока не придёт помощь, username.","Вот это ОХУЕННЫЙ ДЖАЗ, username!","Хочешь много кармы? Поставь Beastie Boys, username!","Сегодня ты просто слушатель, username!","Вот щас моя песня сыграет — я твою СРАЗУ плюсую, username!","Давно не слушали Pink Floyd, username, выручай!","Гимн Советского Союза запрещено минусовать, username!","А ты знаешь, кто получил первый инвайт, username?","Сейчас играет музло из моих жигулей в 2005 году, username.","Спаси, сохрани и открой любым плеером, username!","Shut up and take my songs, username!","Внезапно французский рэп, username. оО","Попсу раз или в плейлист джаз, username?","Позолоти трек, username.","Тыц-тыц, username, унц-унц, username!","НЕ ДАЙ ЭТОЙ ПЕСНЕ ДОИГРАТЬ ДО КОНЦА, username!","Sepultura никогда не добиралась до эфира, username!","Лей побольше кислоты, username!","Мы поставляем Президентов Грузии с 1863 года, username.","Эту песню сам Бог написал, username, и передал её чумовейшей группе, сука %^я Тайм!","Заткнись и плюсуй! Тебе понравится, username!","Поставь ещё того мягкого тупака, username.","Я под неё в душе до сих пор танцую, username.","Нам песня строить и жить помогает, username.","Мы на кукинге, на свэге, на щегольстве, на карате, username!","Триггер уже не тот, username!","А ты уже на спорте, username?","Мы подарим тебе музыкальные перехуки, username.","Один вечер русского рока — ещё не конец, username.","Get the mashup or die buried under the sisechki, username!","Леонтьева лучше бензином заливать, username!","С теглайнами не спорят, username!","Я Триггер, я не хочу ничего решать, я хочу унц–унц, username.","Буланова тоже плачет, username.","username залил Unknown — Noname.","Я под этот трек чик клеил, username!","你好, username!","На Бога надейся, а сам сри-сливай, username!","У меня одного тупняк играет, или это у нас семейное, username?","На любителя, конечно, но мне такое нравится, username.","Большая карма — большая ответственность, username.","Когда–то инвайт давали за +11, username.","Я прослушал, давай ещё раз, username!","Посиди на Триггере, пока не откроются магазины, username!","Когда ты несёшь женщину в шляпе — это победа, username!","Покорми кота, username!","Нет радио, кроме Триггера, и username пророк его.","Здесь спиды не залёживаются, username.","♩ ♪ ♫ ♬ ☊.username.ιllιlι.ιl.","Когда я вижу, как ты плюсуешь, username, ты меня волнуешь.","ПОМНИ, username, У ТЕБЯ ЛИМИТ!","Хоп хэй лалалэй, username!","Прокрастинируешь, username?","У тебя молоко убежало, username!","Вышли инвайт боссу, username! Устрой себе отпуск!","Too much ambient, username!","Berry Weight — не Barry White, username!","Не упоминай Боярского всуе, username!","We don't need no education, username.","Would you go to bed with me, username?","Адажио Альбинони написал Ремо Джадзотто, username.","Дождь прошёл — к Infected Mushroom, username.","Минимальная длина трека — 35 см, username.","Расскажи анекдот про басиста, username.","Чем бы дитя ни тешилось, лишь бы не Скриллексом, username!","Не пытайся перестать плакать, username!","Семь раз послушай, один раз принеси, username!","Не поминай Джонни Кэша всуе, username!","Это энергичный танец, username!","Люби женщин в карму, username!","В случае опасности, заливай Айрон Мейден, username!","Мы ведём вещание на средних и низких нечистотах, username!","Музыка воодушевляет весь мир, снабжает душу крыльями, способствует полёту воображения, а ты продолжай ставить своего Укупника, username!","Музыка должна быть остра, как клинки первой конной, username! %)","Нечего лить - лей харп, username!","Думджаз - для тех, кому блюз уже не поможет, username.","Я не пидорас, но такое тащит, username! %)","Не воруй моих детей, username!","Не бери треки у наркоманов, username!","Не всё то чилл, что уныло, username!","Не весь метал одинаково полезен, username!","Поиграй на контрастах, username!","Начинай вводить, username!","Всё было хорошо, пока на Триггер не пришёл username.","Не обижай семплер, username!","Эй, username, не хочешь немного Даргомыжского?","У Джина Симмонса язык 12 сантиметров, а у username целых двадцать пять!","Держись, username!","думджаз - для тех, кому блюз уже не поможет, username","Не отключайся, username!","прекрасный альбом, username очень гашишный!","Не всё, то чилл, что уныло, username!","Не весь метал одинаково полезен, username!","Пельмени каждый может обидеть, username!","А теперь ешь своего аллигатора, username!","нет, залить ты не сможешь, username!","Боже, что ты несешь, username!","Делаешь Дабстеп? Приходи к нам на завод записывать сэмплы, username!","Как много треков тут хороших username, а плюсы тратим на попсу","Музыка души - это не колебания волн и Скриллекс, username, а не спетая ещё песня жизни.","Укради мне финскую барби, username!","В любой непонятной ситуации гугли, username!","Не отключайся, username!","Это не баян, это ротация, username"];t.users={listeners:0,active:0},t.user={name:"%username%",uplim:0};var c=document.getElementById("audio");t.volume=50,t.changeVolume=function(t){c.volume=t/100},t.greeting=o[Math.floor(Math.random()*o.length)].replace("username",t.user.name),s(function(){t.greeting=o[Math.floor(Math.random()*o.length)].replace("username",t.user.name)},9e3),t.$watch(function(){return e.load.welcome},function(){e.load.welcome===!0&&(t.users.listeners=l.channel.lst,t.users.active=l.channel.a,$(l).bind("listners",function(e,s){t.users.listeners=s.l,t.users.active=s.a,t.$digest()})),t.load.welcome=e.load.welcome},!0),t.$watch(function(){return e.load.signed},function(){e.load.signed===!0&&(console.log("Client.user",l.user),t.user.name=l.user.n,t.user.uplim=l.user.t,$(l).bind("updatelimits",function(e,s){t.user.uplim=s.t,console.log("updatelimits",s)})),t.load.signed=e.load.signed},!0),t.data=function(){console.log("data",l)},t.showLoginModal=function(t){n.show({controller:r,templateUrl:"components/login/login.html",targetEvent:t})},r.$inject=["$scope","$mdDialog"],t.openUploadBar=function(e){t.alert="",i.show({templateUrl:"components/upload/upload.html",controller:"UploadCtrl",targetEvent:e}).then(function(e){t.alert=e.name+" clicked!"})}}]),angular.module("trigger").controller("ChatCtrl",["$scope","$rootScope","Client",function(t,e,s){function a(){var t=new Audio;t.canPlayType("audio/ogg")?(t.src="http://trigger.fm/sounds/tink.ogg",t.play()):(t.src="http://trigger.fm/sounds/tink.mp3",t.play())}function n(t){return t.m.indexOf(s.user.n)>-1?!0:void 0}function i(){document.querySelector("#chatInput input").focus()}t.message="",t.messages=[],t.$watch(function(){return e.load.signed},function(){1==e.load.signed&&(s.getChat({},function(e){t.messages=e.m;for(var s=e.m.length,i=0;s>i;i++)n(e.m[i])&&(e.m[i].private=!0,a());t.$digest()}),$(s).bind("message",function(e,s){n(s)&&(s.private=!0,a()),t.messages.push(s),t.$digest()})),t.load.signed=e.load.signed},!0),t.sendMessage=function(){if(this.message){s.sendMessage(t.message,function(e){e.m&&(t.messages.push(e),t.$digest()),e.error&&console.log(e.error)});for(var e=t.message.split(" "),a=[],n=0;n<e.length;n++)e[n].indexOf(">")>-1&&a.push(e[n]);t.message=a.join(" ")+" "}},t.addNick=function(e){var s=t.message;s=s.indexOf(">"+e)>-1?s.indexOf(">>"+e)>-1?t.message.replace(">>"+e+" ",">"+e+" "):t.message.replace(">"+e+" ",">>"+e+" "):">"+e+" "+t.message,t.message=s,i()}}]),angular.module("trigger").controller("AppCtrl",["$scope","$rootScope","$timeout","$mdSidenav","socket","Client",function(t,e,s,a){var n=document.getElementById("audio");t.play=!1,t.togglePlay=function(){t.play=!t.play,1==t.play?n.play():n.pause()},t.toggleLeft=function(){a("left").toggle()},t.toggleRight=function(){a("right").toggle()}}]).controller("LeftCtrl",["$scope","$timeout","$mdSidenav",function(t,e,s){t.close=function(){s("left").close()}}]).controller("RightCtrl",["$scope","$timeout","$mdSidenav",function(t,e,s){t.close=function(){s("right").close()}}]);var app=angular.module("trigger");app.filter("reverse",function(){return function(t){return t.slice().reverse()}}),app.filter("readableTime",function(){return function(t){var e,s,a,t=parseInt(t,10);switch(!1){case!(60>t):a=t;break;case!(3600>t):s=~~(t/60),a=t%60;break;default:e=~~(t/3600),s=~~(t%3600/60),a=t%60}var n="";return e>0&&(n+=""+e+":"+(10>s?"0":"")),n+=s>0?""+s+":"+(10>a?"0":""):"0:",n+=""+a}}),app.filter("timeago",function(){return function(t,e){var s,a=function(t,e,s){var a=$.isFunction(t)?t(e,o):t,n=s.numbers&&s.numbers[e]||e;return a.replace(/%d/i,n)},n=(new Date).getTime(),i=new Date(t).getTime(),l=e||!1,r={prefixAgo:null,prefixFromNow:null,suffixAgo:"нзд",suffixFromNow:"тлк чт",seconds:"мнт",minute:"мнт",minutes:"%d мнт",hour:"чс",hours:"%d чсв",day:"дн",days:"%d днй",month:"мсц",months:"%d мсцв",year:"гд",years:"%d лт"},o=n-i,c=Math.abs(o)/1e3,d=c/60,u=d/60,m=u/24,h=m/365,g=void 0===r.wordSeparator?" ":r.wordSeparator,p=r.prefixAgo,v=r.suffixAgo;return l&&0>o&&(p=r.prefixFromNow,v=r.suffixFromNow),s=45>c&&a(r.seconds,Math.round(c),r)||90>c&&a(r.minute,1,r)||45>d&&a(r.minutes,Math.round(d),r)||90>d&&a(r.hour,1,r)||24>u&&a(r.hours,Math.round(u),r)||42>u&&a(r.day,1,r)||30>m&&a(r.days,Math.round(m),r)||45>m&&a(r.month,1,r)||365>m&&a(r.months,Math.round(m/30),r)||1.5>h&&a(r.year,1,r)||a(r.years,Math.round(h),r),$.trim([p,s,v].join(g))}});var app=angular.module("trigger");app.factory("md5",function(){var t={createHash:function(t){var e,s,a,n,i,l,r,o,c,d,u=function(t,e){return t<<e|t>>>32-e},m=function(t,e){var s,a,n,i,l;return n=2147483648&t,i=2147483648&e,s=1073741824&t,a=1073741824&e,l=(1073741823&t)+(1073741823&e),s&a?2147483648^l^n^i:s|a?1073741824&l?3221225472^l^n^i:1073741824^l^n^i:l^n^i},h=function(t,e,s){return t&e|~t&s},g=function(t,e,s){return t&s|e&~s},p=function(t,e,s){return t^e^s},v=function(t,e,s){return e^(t|~s)},b=function(t,e,s,a,n,i,l){return t=m(t,m(m(h(e,s,a),n),l)),m(u(t,i),e)},_=function(t,e,s,a,n,i,l){return t=m(t,m(m(g(e,s,a),n),l)),m(u(t,i),e)},f=function(t,e,s,a,n,i,l){return t=m(t,m(m(p(e,s,a),n),l)),m(u(t,i),e)},k=function(t,e,s,a,n,i,l){return t=m(t,m(m(v(e,s,a),n),l)),m(u(t,i),e)},w=function(t){for(var e,s=t.length,a=s+8,n=(a-a%64)/64,i=16*(n+1),l=new Array(i-1),r=0,o=0;s>o;)e=(o-o%4)/4,r=o%4*8,l[e]=l[e]|t.charCodeAt(o)<<r,o+=1;return e=(o-o%4)/4,r=o%4*8,l[e]=l[e]|128<<r,l[i-2]=s<<3,l[i-1]=s>>>29,l},y=function(t){var e,s,a="",n="";for(s=0;3>=s;s+=1)e=t>>>8*s&255,n="0"+e.toString(16),a+=n.substr(n.length-2,2);return a},x=[],$=7,M=12,C=17,z=22,I=5,D=9,S=14,U=20,T=4,B=11,P=16,F=23,L=6,H=10,N=15,A=21;for(x=w(t),r=1732584193,o=4023233417,c=2562383102,d=271733878,e=x.length,s=0;e>s;s+=16)a=r,n=o,i=c,l=d,r=b(r,o,c,d,x[s+0],$,3614090360),d=b(d,r,o,c,x[s+1],M,3905402710),c=b(c,d,r,o,x[s+2],C,606105819),o=b(o,c,d,r,x[s+3],z,3250441966),r=b(r,o,c,d,x[s+4],$,4118548399),d=b(d,r,o,c,x[s+5],M,1200080426),c=b(c,d,r,o,x[s+6],C,2821735955),o=b(o,c,d,r,x[s+7],z,4249261313),r=b(r,o,c,d,x[s+8],$,1770035416),d=b(d,r,o,c,x[s+9],M,2336552879),c=b(c,d,r,o,x[s+10],C,4294925233),o=b(o,c,d,r,x[s+11],z,2304563134),r=b(r,o,c,d,x[s+12],$,1804603682),d=b(d,r,o,c,x[s+13],M,4254626195),c=b(c,d,r,o,x[s+14],C,2792965006),o=b(o,c,d,r,x[s+15],z,1236535329),r=_(r,o,c,d,x[s+1],I,4129170786),d=_(d,r,o,c,x[s+6],D,3225465664),c=_(c,d,r,o,x[s+11],S,643717713),o=_(o,c,d,r,x[s+0],U,3921069994),r=_(r,o,c,d,x[s+5],I,3593408605),d=_(d,r,o,c,x[s+10],D,38016083),c=_(c,d,r,o,x[s+15],S,3634488961),o=_(o,c,d,r,x[s+4],U,3889429448),r=_(r,o,c,d,x[s+9],I,568446438),d=_(d,r,o,c,x[s+14],D,3275163606),c=_(c,d,r,o,x[s+3],S,4107603335),o=_(o,c,d,r,x[s+8],U,1163531501),r=_(r,o,c,d,x[s+13],I,2850285829),d=_(d,r,o,c,x[s+2],D,4243563512),c=_(c,d,r,o,x[s+7],S,1735328473),o=_(o,c,d,r,x[s+12],U,2368359562),r=f(r,o,c,d,x[s+5],T,4294588738),d=f(d,r,o,c,x[s+8],B,2272392833),c=f(c,d,r,o,x[s+11],P,1839030562),o=f(o,c,d,r,x[s+14],F,4259657740),r=f(r,o,c,d,x[s+1],T,2763975236),d=f(d,r,o,c,x[s+4],B,1272893353),c=f(c,d,r,o,x[s+7],P,4139469664),o=f(o,c,d,r,x[s+10],F,3200236656),r=f(r,o,c,d,x[s+13],T,681279174),d=f(d,r,o,c,x[s+0],B,3936430074),c=f(c,d,r,o,x[s+3],P,3572445317),o=f(o,c,d,r,x[s+6],F,76029189),r=f(r,o,c,d,x[s+9],T,3654602809),d=f(d,r,o,c,x[s+12],B,3873151461),c=f(c,d,r,o,x[s+15],P,530742520),o=f(o,c,d,r,x[s+2],F,3299628645),r=k(r,o,c,d,x[s+0],L,4096336452),d=k(d,r,o,c,x[s+7],H,1126891415),c=k(c,d,r,o,x[s+14],N,2878612391),o=k(o,c,d,r,x[s+5],A,4237533241),r=k(r,o,c,d,x[s+12],L,1700485571),d=k(d,r,o,c,x[s+3],H,2399980690),c=k(c,d,r,o,x[s+10],N,4293915773),o=k(o,c,d,r,x[s+1],A,2240044497),r=k(r,o,c,d,x[s+8],L,1873313359),d=k(d,r,o,c,x[s+15],H,4264355552),c=k(c,d,r,o,x[s+6],N,2734768916),o=k(o,c,d,r,x[s+13],A,1309151649),r=k(r,o,c,d,x[s+4],L,4149444226),d=k(d,r,o,c,x[s+11],H,3174756917),c=k(c,d,r,o,x[s+2],N,718787259),o=k(o,c,d,r,x[s+9],A,3951481745),r=m(r,a),o=m(o,n),c=m(c,i),d=m(d,l);var O=y(r)+y(o)+y(c)+y(d);return O.toLowerCase()}};return t}),angular.module("trigger").run(["$templateCache",function(t){t.put("components/app/app.html",'<div ng-controller="AppCtrl" layout="column" layout-fill=""><script>\r\n(function() {\r\n  var button = document.getElementById(\'audioBtn\');\r\n  var audio = document.getElementById(\'audio\');\r\n  var onClick = function() {\r\n    button.classList.toggle(\'play\');\n    if (audio.paused) {\n      audio.play();\n    } else {\n      audio.pause();\n    }\n  };\r\n  button.addEventListener(\'click\', onClick, false);\r\n})();\r\n</script><section layout="row" flex=""><md-sidenav class="md-sidenav-left md-whiteframe-z2" component-id="left" is-locked-open="$media(\'sm\')"><md-toolbar class="console__switcher-cont"><audio id="audio"><source src="http://trigger.fm/stream/mainmp3" type="audio/mpeg"><source src="http://trigger.fm/stream/main" type="audio/ogg"></audio><svg id="audioBtn" class="switcher" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 850.4 595.3" enable-background="new 0 0 850.4 595.3" xml:space="preserve"><path class="b3" fill="none" stroke="#B4B4B4" stroke-width="55.3274" stroke-miterlimit="10" d="M154.7,568.2c-149-149-149-392.1,0-541.1"></path><path class="b2" fill="none" stroke="#9D9D9D" stroke-width="55.3274" stroke-miterlimit="10" d="M239,483.9C135.1,380,135.1,213.3,239,109.4"></path><path class="b1" fill="none" stroke="#7F7F7F" stroke-width="55.3274" stroke-miterlimit="10" d="M323.3,399.6c-56.9-56.9-56.9-149,0-205.8"></path><circle class="c" fill="#7F7F7F" cx="425.2" cy="297.6" r="58.8"></circle><path class="b1" fill="none" stroke="#7F7F7F" stroke-width="55.3274" stroke-miterlimit="10" d="M527.1,195.7c56.9,56.9,56.9,149,0,205.8"></path><path class="b2" fill="none" stroke="#9D9D9D" stroke-width="55.3274" stroke-miterlimit="10" d="M611.4,111.4c103.9,103.9,103.9,270.5,0,374.4"></path><path class="b3" fill="none" stroke="#B4B4B4" stroke-width="55.3274" stroke-miterlimit="10" d="M695.7,27.1c149,149,149,392.1,0,541.1"></path></svg></md-toolbar><md-content class="console__ctrl" ng-controller="LeftCtrl"><div hide-gt-sm="" show-gt-md="" class="console" ng-include="\'components/console/console.html\'"></div></md-content></md-sidenav><div class="viewport--H" ng-cloak=""><div class="playlist" ng-include="\'components/playlist/playlist.html\'"></div></div><md-sidenav class="md-sidenav-right md-whiteframe-z2" component-id="right" is-locked-open="$media(\'md\')"><md-content ng-controller="RightCtrl"><div class="info" ng-include="\'components/info/info.html\'"></div></md-content></md-sidenav></section></div>'),t.put("components/chat/chat.html",'<div ng-controller="ChatCtrl" class="chat__module"><md-content class="chat__md-content" scroll-glue=""><md-list class="chat__list" scroll-glue=""><md-item ng-repeat="msg in messages" class="chat__list-item"><md-item-content class="chat__item"><div class="md-tile-content" ng-class="{ \'private\': msg.pm, \'personal\': msg.private }"><span class="msg__author" ng-click="addNick(msg.uname)">{{msg.uname}}:</span> <span class="msg__message" ng-bind-html="msg.m"></span> <span class="msg__time">{{msg.t |timeago }}</span></div></md-item-content></md-item></md-list></md-content><div class="online__include" ng-include="\'components/online/online.html\'"></div><div class="chat__input-grp"><md-text-float id="chatInput" class="chat__input" label="начинай вводить..." ng-enter="sendMessage()" ng-model="message"></md-text-float><div class="chat__input-nav"><md-button class="chat__button--bold" aria-label="chat-bold">bold</md-button><md-button class="chat__button--irony" aria-label="chat-irony">irony</md-button><md-checkbox ng-model="data.tink" aria-label="Тиньк" class="chat__checkbox--tink">Тиньк</md-checkbox><md-checkbox ng-model="data.img" aria-label="Картинки" class="chat__checkbox--img">Картинки</md-checkbox></div></div></div>'),t.put("components/console/console.html",'<md-toolbar class="console__include" layout="column" layout-align="center center" ng-controller="ConsoleCtrl"><md-slider ng-model="volume" aria-label="volume-slider" ng-change="changeVolume(volume)" min="0" max="100" step="1"></md-slider><img ng-src="assets/images/logo.png" class="console__logo" ng-click="data()"><md-button class="console__login-btn" aria-label="console-login" ng-show="!load.signed" ng-click="showLoginModal($event)">Log in</md-button><p class="console__stat">Слушают <span class="console__listeners">{{users.listeners}}</span> из них активно: <span class="console__active-users">{{users.active}}</span></p><md-button class="console__buttton--upload" aria-label="uploader-btn" ng-click="openUploadBar($event)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M19 13h-6v6h-2v-6h-6v-2h6v-6h2v6h6v2z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button><p class="console__user-limit" ng-show="load.signed">Ты можешь залить<time class="console__limit">{{user.uplim | readableTime}}</time></p><p class="console__greating" ng-bind="greeting"></p><p class="console__links"><a href="#" class="console__link">Жертвенник</a> <a href="#" class="console__link">Уголок потребителя</a> <a href="#" class="console__link">Сделать ночь</a> <a href="#" class="console__link">RTFM</a></p></md-toolbar>'),t.put("components/democracy/democracy.html",'<div ng-controller="DemocracyCtrl" class="democracy__ctrl"><ng-switch on="data.selectedIndex" class="democracy__tabpanel-container"><div role="tabpanel" id="tabModerList-content" aria-labelledby="tabModerList" ng-switch-when="0" md-swipe-left="next()" md-swipe-right="previous()"><md-card class="democracy__elections"><h4 class="t-a-semicolon democracy__header">Выборы</h4><md-text-float label="ID кандидата" ng-model="user.lastName" class="democracy__elections-input"></md-text-float><div class="democracy__elections-row"><span class="democracy__elections-choice"><span class="t-a-semicolon">Ты проголосовал за</span> <span class="t-b-space democracy__elections-username">Suok</span></span><md-button aria-label="vote" class="md-raised democracy__elections-btn">Голосовать</md-button></div></md-card><md-card class="democracy__admin"><div class="president"><div class="header">Президент:</div><div class="content"><md-button aria-label="view-president" class="md-raised democracy__president-btn">{{president.name}}</md-button><span class="t-b-space-hyphen-space">{{president.description}}</span></div></div><div class="ban"><div class="header">Забанить:</div><div class="content"><md-text-float label="ID" ng-model="user.lastName" class="input--id"></md-text-float><md-text-float label="Причина бана" ng-model="user.lastName" class="input--reason"></md-text-float><md-button aria-label="ban-user" class="md-raised ban--btn">Yarrr!</md-button></div></div><div class="moder"><div class="header">Модеры:</div><div class="content" ng-repeat="mod in moderators"><span class="democracy__moderator"><md-button aria-label="view-moderator" class="md-raised democracy__moderator">{{mod.name}}</md-button><span class="t-b-space-hyphen-space">{{mod.description}}</span></span></div></div><div class="banned"><div class="header">Президент:</div><div class="content" ng-repeat="toll in banned"><span class="democracy__moderator"><md-button aria-label="view-banned" class="md-raised democracy__moderator">{{toll.name}}</md-button><span class="t-b-space-hyphen-space">{{toll.reason}}</span></span></div></div></md-card></div><div role="tabpanel" id="tabModerText-content" aria-labelledby="tabModerText" ng-switch-when="1" md-swipe-left="next()" md-swipe-right="previous()"><md-card class="democracy__list"><md-button aria-label="vote" class="md-raised democracy__moderator"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M3 17.25v3.75h3.75l11.06-11.06-3.75-3.75-11.06 11.06zm17.71-10.21c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button><p>История снова работает.<br>Чат работает кое-как.<br>Если кликнуть на ник в чате - то ему можно отправить личное сообщение. Клики на юзеров в блоке "онлайн" пока не работают.<br>Можно слушать музыку! Клик на ту штуку в левом верхнем углу!<br>Треки в плейлисте чуть неправильно отсортированы пока.<br>И да, можно уже попробовать открыть клиент на мобильнике! Ура.<br>Если вам нужно только голосовать за треки (причем не знать кто за что голосовал), слушать музыку и сидеть в чате - добро пожаловать. Остальные функции будут дописываться.</p></md-card></div></ng-switch><md-tabs class="md-accent" selected="data.selectedIndex"><md-tab id="ModerList" aria-controls="tabModerList-content"><span class="tabs__full">Moder</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M20 2h-16c-1.1 0-1.99.9-1.99 2l-.01 18 4-4h14c1.1 0 2-.9 2-2v-12c0-1.1-.9-2-2-2zm-14 7h12v2h-12v-2zm8 5h-8v-2h8v2zm4-6h-12v-2h12v2z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></span></md-tab><md-tab id="tabModerText" aria-controls="tabModerText-content"><span class="tabs__full">Text</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M18 17h-12v-2h12v2zm0-4h-12v-2h12v2zm0-4h-12v-2h12v2zm-15 13l1.5-1.5 1.5 1.5 1.5-1.5 1.5 1.5 1.5-1.5 1.5 1.5 1.5-1.5 1.5 1.5 1.5-1.5 1.5 1.5 1.5-1.5 1.5 1.5v-20l-1.5 1.5-1.5-1.5-1.5 1.5-1.5-1.5-1.5 1.5-1.5-1.5-1.5 1.5-1.5-1.5-1.5 1.5-1.5-1.5-1.5 1.5-1.5-1.5v20z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></span></md-tab></md-tabs></div>'),t.put("components/history/history.html",'<div ng-controller="HistoryCtrl" class="history__module"><div class="history__checkbox-grp"><md-checkbox ng-model="gold" ng-change="showHistory()" aria-label="Золото" class="history__checkbox--gold">Золото</md-checkbox></div><md-content class="history__content"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in tracks | orderBy:\'tt\':true" class="playlist__track" ng-class="{\'track--gold\': gold == true}"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt=""></div><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__votes-block"><span class="track__rating">{{track.r}}</span></div></md-item></md-list></md-content></div>'),t.put("components/info/info.html",'<div ng-controller="InfoCtrl" class="tabsdemoStaticTabs"><md-tabs class="md-accent" selected="data.selectedIndex"><md-tab id="tabChat" aria-controls="tabChat-content" ng-show="load.signed"><span class="tabs__full">Чат</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M20 2h-16c-1.1 0-1.99.9-1.99 2l-.01 18 4-4h14c1.1 0 2-.9 2-2v-12c0-1.1-.9-2-2-2zm-14 7h12v2h-12v-2zm8 5h-8v-2h8v2zm4-6h-12v-2h12v2z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></span></md-tab><md-tab id="tabOnline" aria-controls="tabOnline-content" ng-show="load.signed"><span class="tabs__full">Онлайн</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M14.69 17.1c-.74.58-1.7.9-2.69.9s-1.95-.32-2.69-.9c-.22-.17-.53-.13-.7.09-.17.22-.13.53.09.7.91.72 2.09 1.11 3.3 1.11s2.39-.39 3.31-1.1c.22-.17.26-.48.09-.7-.17-.23-.49-.26-.71-.1z"></path><circle cx="8.5" cy="12.5" r="1"></circle><path d="M12 0c-6.63 0-12 5.37-12 12s5.37 12 12 12 12-5.37 12-12-5.37-12-12-12zm7.96 14.82c-1.09 3.74-4.27 6.46-8.04 6.46-3.78 0-6.96-2.72-8.04-6.47-1.19-.11-2.13-1.18-2.13-2.52 0-1.27.85-2.31 1.97-2.5 2.09-1.46 3.8-3.49 4.09-5.05v-.01c1.35 2.63 6.3 5.19 11.83 5.06l.3-.03c1.28 0 2.31 1.14 2.31 2.54 0 1.38-1.02 2.51-2.29 2.52z"></path><circle cx="15.5" cy="12.5" r="1"></circle><path d="M0 0h24v24h-24z" fill="none"></path></svg></span></md-tab><md-tab id="tabHistory" aria-controls="tabHistory-content"><span class="tabs__full">История</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M0 0h24v24h-24z" fill="none"></path><path opacity=".9" d="M13 3c-4.97 0-9 4.03-9 9h-3l3.89 3.89.07.14 4.04-4.03h-3c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42c1.63 1.63 3.87 2.64 6.36 2.64 4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08v-4.25h-1.5z"></path></svg></span></md-tab><md-tab id="tabDemocracy" aria-controls="tabDemocracy-content"><span class="tabs__full">Демократия</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M0 0h24v24h-24z" fill="none"></path><path d="M4 10v7h3v-7h-3zm6 0v7h3v-7h-3zm-8 12h19v-3h-19v3zm14-12v7h3v-7h-3zm-4.5-9l-9.5 5v2h19v-2l-9.5-5z"></path></svg></span></md-tab><md-tab id="tabProfile" aria-controls="tabProfile-content" ng-show="load.signed"><span class="tabs__full">Профиль</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-14c0-1.1-.9-2-2-2h-14c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1h-12v-1z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></span></md-tab></md-tabs><ng-switch on="data.selectedIndex" class="tabpanel-container"><div role="tabpanel" id="tabChat-content" aria-labelledby="tabChat" ng-switch-when="0" md-swipe-left="next()" md-swipe-right="previous()"><div class="chat" ng-include="\'components/chat/chat.html\'"></div></div><div role="tabpanel" id="tabOnline-content" aria-labelledby="tabOnline" ng-switch-when="1" md-swipe-left="next()" md-swipe-right="previous()"><div class="online" ng-include="\'components/online/online.html\'"></div></div><div role="tabpanel" id="tabHistory-content" aria-labelledby="tabHistory" ng-switch-when="2" md-swipe-left="next()" md-swipe-right="previous()"><div class="history" ng-include="\'components/history/history.html\'"></div></div><div role="tabpanel" id="tabDemocracy-content" aria-labelledby="tabDemocracy" ng-switch-when="3" md-swipe-left="next()" md-swipe-right="previous()"><div class="democracy__include" ng-include="\'components/democracy/democracy.html\'"></div></div><div role="tabpanel" id="tabProfile-content" aria-labelledby="tabProfile" ng-switch-when="4" md-swipe-left="next()" md-swipe-right="previous()"><div class="profile__include" ng-include="\'components/profile/profile.html\'"></div></div></ng-switch></div>'),t.put("components/login/login.html",'<md-dialog aria-label="login-modal" class="login__ctrl" ng-controller="LoginCtrl"><md-card layout="column" layout-align="center center" class="login__card"><md-text-float class="login__username" label="Username" ng-model="user.name"></md-text-float><md-text-float class="login__password" label="Password" ng-model="user.password" type="password"></md-text-float><md-button aria-label="login--btn" class="login__btn" ng-click="login()">Yarrr!</md-button></md-card></md-dialog>'),t.put("components/minuses/minuses.html",'<div class="minuses__ctrl" ng-controller="MinusesCtrl"><md-content class="history__content"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in tracks | orderBy:\'tt\':true" class="playlist__track"><div class="track__img-cont"><img ng-src="{{track.src}}" class="track__img" alt=""></div><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>{{track.tt | date:\'medium\'}}</span></div><div class="track__votes-block"><span class="track__rating">{{track.r}}</span></div></md-item></md-list></md-content></div>'),t.put("components/navbar/navbar.html",'<md-toolbar layout="row" layout-align="center center" ng-controller="NavbarCtrl"><md-button aria-label="lulz" href="https://github.com/Swiip/generator-gulp-angular">Gulp Angular</md-button><section flex="" layout="row" layout-align="left center"><md-button href="#" class="md-raised">Home</md-button><md-button href="#" class="md-raised">About</md-button><md-button href="#" class="md-raised">Contact</md-button></section><md-button aria-label="example" href="#">Current date: {{ date | date:\'yyyy-MM-dd\' }}</md-button></md-toolbar>'),t.put("components/online/_template.html",""),t.put("components/online/online.html",'<div class="online__ctrl" ng-controller="OnlineCtrl"><p class="online__here">Здесь: <span class="online__counter">{{usersCount}}</span></p><md-content class="online__md-content"><md-list class="online__list"><md-item ng-repeat="user in users | reverse" class="online__list-item"><md-item-content class="online__item" ng-class="{active: user.a==true}"><md-button ng-click="openProfile(user.id)" aria-label="open-user-profile" class="user__2profile">i</md-button><md-button ng-click="addNick(user.n)" aria-label="add-user-to-chat" class="user__2chat">{{user.n}}</md-button></md-item-content></md-item></md-list></md-content></div>'),t.put("components/playlist/playlist.html",'<div class="playlist__ctrl" layout="column" ng-controller="PlaylistCtrl"><md-toolbar class="playlist__toolbar"><h2 class="md-toolbar-tools playlist__toolbar-tools"><md-button class="playlist__leftbar-swither" aria-label="leftbar-switcher" ng-click="toggleLeft()"><svg class="playlist__leftbar-svg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewbox="0 0 56 56" enable-background="new 0 0 56 56" xml:space="preserve"><path class="b3" fill="none" stroke="#B4B4B4" stroke-width="3" stroke-miterlimit="10" d="M14.2,41.8c-7.6-7.6-7.6-20,0-27.6"></path><path class="b2" fill="none" stroke="#9D9D9D" stroke-width="3" stroke-miterlimit="10" d="M18.5,37.5c-5.3-5.3-5.3-13.8,0-19.1"></path><path class="b1" fill="none" stroke="#7F7F7F" stroke-width="3" stroke-miterlimit="10" d="M22.8,33.2c-2.9-2.9-2.9-7.6,0-10.5"></path><circle class="c" fill="#7F7F7F" cx="28" cy="28" r="3"></circle><path class="b1" fill="none" stroke="#7F7F7F" stroke-width="3" stroke-miterlimit="10" d="M33.2,22.8c2.9,2.9,2.9,7.6,0,10.5"></path><path class="b2" fill="none" stroke="#9D9D9D" stroke-width="3" stroke-miterlimit="10" d="M37.5,18.5c5.3,5.3,5.3,13.8,0,19.1"></path><path class="b3" fill="none" stroke="#B4B4B4" stroke-width="3" stroke-miterlimit="10" d="M41.8,14.2c7.6,7.6,7.6,20,0,27.6"></path></svg></md-button><md-button class="playlist__rightbar-swither" aria-label="rightbar-switcher" ng-click="toggleRight()"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M7 19h10v-15h-10v15zm-5-2h4v-11h-4v11zm16-11v11h4v-11h-4z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button></h2></md-toolbar><md-content class="playlist__content--current"><md-list layout="column" class="playlist__list"><md-item class="playlist__track"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt="" ng-click="debug()"></div><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div><div class="track__votes-block" ng-class="{ \'voted--up\': track.vote > 0, \'voted--down\': track.vote < 0 }" ng-show="load.signed"><md-button class="md-fab track__vote--down" aria-label="track-up" ng-click="voteDown(track.id)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M16.59 8.59l-4.59 4.58-4.59-4.58-1.41 1.41 6 6 6-6z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button><span class="track__rating">{{track.r}}</span><md-button class="md-fab track__vote--up" aria-label="track-down" ng-click="voteUp(track.id)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M12 8l-6 6 1.41 1.41 4.59-4.58 4.59 4.58 1.41-1.41z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button></div><div class="track__progress"><div class="track__progress-active" style="width:{{progress}}%;"></div></div></md-item></md-list></md-content><md-content class="playlist__content" scroll-glue="reverse"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in playlist track by track.id" class="playlist__track" style="order: {{reverse*100 - track.r}}"><div class="track__img-cont"><img ng-src="assets\\images\\nocover.png" class="track__img" alt="" ng-click="data(track)"></div><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>+{{track.tt | readableTime}}</span></div><div class="track__votes-block" ng-class="{ \'voted--up\': track.vote > 0, \'voted--down\': track.vote < 0 }" ng-show="load.signed"><md-button class="md-fab track__vote--down" aria-label="track-up" ng-click="voteDown(track.id)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M16.59 8.59l-4.59 4.58-4.59-4.58-1.41 1.41 6 6 6-6z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button><span class="track__rating">{{track.r}}</span><md-button class="md-fab track__vote--up" aria-label="track-down" ng-click="voteUp(track.id)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M12 8l-6 6 1.41 1.41 4.59-4.58 4.59 4.58 1.41-1.41z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button></div></md-item></md-list></md-content></div>'),t.put("components/pluses/pluses.html",'<div class="pluses__ctrl" ng-controller="PlusesCtrl"><md-content class="history__content"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in tracks | orderBy:\'tt\':true" class="playlist__track"><div class="track__img-cont"><img ng-src="{{track.src}}" class="track__img" alt=""></div><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>{{track.tt | date:\'medium\'}}</span></div><div class="track__votes-block"><span class="track__rating">{{track.r}}</span></div></md-item></md-list></md-content></div>'),t.put("components/profile/profile.html",'<div class="profile__ctrl" ng-controller="ProfileCtrl"><ng-switch on="data.selectedIndex" class="profile__tabpanel-container"><div role="tabpanel" id="tabUser-content" aria-labelledby="tabUser" ng-switch-when="0" md-swipe-left="next()" md-swipe-right="previous()"><div class="user__include" ng-include="\'components/user/user.html\'"></div></div><div role="tabpanel" id="tabUploads-content" aria-labelledby="tabUploads" ng-switch-when="1" md-swipe-left="next()" md-swipe-right="previous()"><div class="uploads__include" ng-include="\'components/uploads/uploads.html\'"></div></div><div role="tabpanel" id="tabPluses-content" aria-labelledby="tabPluses" ng-switch-when="2" md-swipe-left="next()" md-swipe-right="previous()"><div class="pluses__include" ng-include="\'components/pluses/pluses.html\'"></div></div><div role="tabpanel" id="tabMinuses-content" aria-labelledby="tabMinuses" ng-switch-when="3" md-swipe-left="next()" md-swipe-right="previous()"><div class="minuses__include" ng-include="\'components/minuses/minuses.html\'"></div></div><div role="tabpanel" id="tabSettings-content" aria-labelledby="tabSettings" ng-switch-when="4" md-swipe-left="next()" md-swipe-right="previous()" ng-show="isMyProfile"><div class="settings__include" ng-include="\'components/settings/settings.html\'"></div></div></ng-switch><md-tabs class="md-accent" selected="data.selectedIndex"><md-tab id="tabUser" aria-controls="tabUser-content"><span class="tabs__full">User</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3l-10-9-10 9h3v8z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></span></md-tab><md-tab id="tabUploads" aria-controls="tabUploads-content"><span class="tabs__full">Uploads</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M0 0h24v24h-24z" fill="none"></path><path d="M19.35 10.04c-.68-3.45-3.71-6.04-7.35-6.04-2.89 0-5.4 1.64-6.65 4.04-3.01.32-5.35 2.87-5.35 5.96 0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zm-2.35 2.96l-5 5-5-5h3v-4h4v4h3z"></path></svg></span></md-tab><md-tab id="tabPluses" aria-controls="tabPluses-content"><span class="tabs__full">Pluses</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M0 0h24v24h-24z" fill="none"></path><path d="M1 21h4v-12h-4v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06l-1.06-1.05-6.58 6.59c-.37.36-.59.86-.59 1.41v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01.01-.08z"></path></svg></span></md-tab><md-tab id="tabMinuses" aria-controls="tabMinuses-content"><span class="tabs__full">Minuses</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M0 0h24v24h-24z" fill="none"></path><path d="M15 3h-9c-.83 0-1.54.5-1.84 1.22l-3.02 7.05c-.09.23-.14.47-.14.73v1.91l.01.01-.01.08c0 1.1.9 2 2 2h6.31l-.95 4.57-.03.32c0 .41.17.79.44 1.06l1.06 1.05 6.59-6.59c.36-.36.58-.86.58-1.41v-10c0-1.1-.9-2-2-2zm4 0v12h4v-12h-4z"></path></svg></span></md-tab><md-tab id="tabSettings" aria-controls="tabSettings-content" ng-show="isMyProfile"><span class="tabs__full">Settings</span> <span class="tabs__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M0 0h24v24h-24z" fill="none"></path><path d="M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65c-.03-.24-.24-.42-.49-.42h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-7.43 2.52c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"></path></svg></span></md-tab></md-tabs></div>'),t.put("components/settings/settings.html",'<div class="settings__ctrl" ng-controller="SettingsCtrl"><md-card class="settings__card"><div class="settings__logout"><md-button class="settings__logout-btn" aria-label="logout">Log out</md-button></div><div class="settings__chat"><md-checkbox ng-model="data.tink" aria-label="Тинькать" class="settings__tink">Тинькать</md-checkbox><md-checkbox ng-model="data.img" aria-label="Показывать изображения" class="settings__img">Показывать изображения</md-checkbox><md-checkbox ng-model="data.female" aria-label="Ура! Я женщина!" class="settings__female">Ура! Я женщина!</md-checkbox></div><div class="settings__password"><md-text-float class="settings__password--old" aria-label="settings-old-password" label="Старый пароль" ng-model="message"></md-text-float><md-text-float class="settings__password--new" aria-label="settings-new-password" label="Новый пароль" ng-model="message"></md-text-float><md-text-float class="settings__password--new" label="Еще раз" ng-model="message"></md-text-float><md-button class="settings__password-btn" aria-label="change-password">Yarrr!</md-button></div></md-card></div>'),t.put("components/upload/upload.html",'<md-bottom-sheet class="md-grid uploadbar"><md-button>Upload - Drag & Drop here!</md-button><md-list><md-item ng-repeat="item in items"><md-button class="md-grid-item-content" aria-label="{{item.name}}" ng-click="listItemClick($index)"><div class="md-icon-container"><md-inline-grid-icon icon="{{item.icon}}"></md-inline-grid-icon></div><p class="md-grid-text">111</p></md-button></md-item></md-list></md-bottom-sheet>'),t.put("components/uploads/uploads.html",'<div class="uploads__ctrl" ng-controller="UploadsCtrl"><md-content class="history__content"><md-list layout="column" class="playlist__list"><md-item ng-repeat="track in tracks | orderBy:\'tt\':true" class="playlist__track"><div class="track__img-cont"><img ng-src="{{track.src}}" class="track__img" alt=""></div><div class="track__content"><h3 class="track__artist">{{track.a}}</h3><h4 class="track__title">{{track.t}}</h4></div><div class="track__tags"><span class="track__tag" ng-repeat="tag in track.tg">{{tag.n}}</span></div><div class="track__time"><span>{{track.tt | date:\'medium\'}}</span></div><div class="track__votes-block"><span class="track__rating">{{track.r}}</span></div></md-item></md-list></md-content></div>'),t.put("components/user/user.html",'<div class="user__ctrl" ng-controller="UserCtrl"><md-card class="profile__main"><div class="user__nav"><div class="user_names-block"><span class="user__name">{{user.name}}</span> <span class="user__id">#{{user.id}}</span></div><div class="user__votes-block"><md-button class="md-fab user__vote--up" aria-label="user-plus" ng-show="!isMyProfile" ng-click="voteUp(track.id)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M16.59 8.59l-4.59 4.58-4.59-4.58-1.41 1.41 6 6 6-6z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button><span class="user__karma">{{user.karma}}</span><md-button class="md-fab user__vote--down" aria-label="user-minus" ng-show="!isMyProfile" ng-click="voteDown(track.id)"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24"><path d="M12 8l-6 6 1.41 1.41 4.59-4.58 4.59 4.58 1.41-1.41z"></path><path d="M0 0h24v24h-24z" fill="none"></path></svg></md-button></div></div><div class="user__main"><img class="user__img" ng-src="assets/images/ear.png" alt=""><div class="user__additional"><p class="user__descripton" ng-bind-html="user.i"></p><p class="user__origin">С нами с <span class="user__regdate">{{user.reg | date:\'medium\'}}</span> по приглашению <button class="user__father" aria-label="user-origin">{{user.invites.p.name}}</button></p><p class="user__invited">{{user.g ? \'Понаприглашал\' : \'Понаприглашала\'}}: <span class="user__children" ng-repeat="child in user.invites.u"><button class="user__child" aria-label="user-child">{{child.n}}</button></span></p></div></div><div class="user__control"><md-checkbox ng-model="data.img" aria-label="ОМММ" class="user__ignore">ОМММ</md-checkbox><md-button class="user__ban" aria-label="user-ban">Забанить</md-button></div></md-card></div>')
}]);
